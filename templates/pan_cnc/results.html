{% extends base_html|default:'pan_cnc/base.html' %}
{% load static %}
{% block head %}
    <script type="application/javascript">
        $(document).ready(function () {
            $('body').on('click', 'a', function (event) {
                let e = $(this);
                let target = e.attr('href');
                if (target.startsWith('#')) {
                    event.preventDefault();
                    let t = $(target);
                    let offset = t.offset();
                    let scrollto = offset.top - 60; // minus fixed header height
                    $('html, body').animate({scrollTop: scrollto}, 1000);
                }
            });
        });
    </script>
{% endblock %}
{% block content %}
<div class="card border-primary mb-5 shadow-lg">
    <div class="card-header">
        {{ view.get_header }}
    </div>
    <div class="card-body">
        <h4 class="card-title">
            {% if title %}
            {{ title }}
            {% else %}
            Output
            {% endif %}
        </h4>
        <p class="card-text">
            {%  if view.service.type == 'template' %}
            <div class="pb-4" style="white-space: pre; overflow-x: scroll">{{ results | safe | linebreaksbr }}</div>
            {% else %}
            <pre class="pb-4">{{ results | linebreaksbr  }}</pre>
            {% endif %}
        </p>
    </div>
    <div class="card-footer text-right">
        <p class="card-text">
            {%  if request.session.next_step %}
                {%  if request.session.last_step %}
                    <a href="/workflow/{{ request.session.next_step }}" class="btn btn-primary">Complete</a>
                    {% else %}
                    <a href="/workflow/{{ request.session.next_step }}" class="btn btn-primary">Continue</a>
                {% endif %}
                {%  else %}
                <a href="{{ request.session.last_page|urlencode }}" class="btn btn-primary">Continue</a>
            {% endif %}
        </p>
    </div>
</div>
{%  endblock %}